
    <!DOCTYPE html>
    <html>
    <head>
        <title>Interactive Phylogenetic Tree - Varanus komodoensis</title>
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
                background-color: #f8f9fa;
            }
            
            .tree-container {
                background: white;
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                padding: 20px;
                margin: 20px 0;
            }
            
            .node circle {
                stroke: #333;
                stroke-width: 2px;
                cursor: pointer;
            }
            
            .node.query circle {
                stroke: #FF0000;
                stroke-width: 4px;
                r: 8;
            }
            
            .node text {
                font: 12px sans-serif;
                cursor: pointer;
            }
            
            .node.query text {
                font-weight: bold;
                font-size: 14px;
            }
            
            .link {
                fill: none;
                stroke: #ccc;
                stroke-width: 2px;
            }
            
            .tooltip {
                position: absolute;
                text-align: left;
                padding: 10px;
                font: 12px sans-serif;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                border-radius: 5px;
                pointer-events: none;
                opacity: 0;
                max-width: 300px;
            }
            
            .legend {
                background: #f8f9fa;
                border: 1px solid #ddd;
                border-radius: 5px;
                padding: 15px;
                margin: 20px 0;
            }
            
            .legend-item {
                display: inline-block;
                margin: 5px 10px;
            }
            
            .legend-color {
                width: 15px;
                height: 15px;
                display: inline-block;
                margin-right: 5px;
                border-radius: 50%;
                border: 1px solid #333;
            }
            
            .controls {
                margin: 20px 0;
                text-align: center;
            }
            
            .btn {
                background: #007bff;
                color: white;
                border: none;
                padding: 8px 16px;
                margin: 0 5px;
                border-radius: 4px;
                cursor: pointer;
            }
            
            .btn:hover {
                background: #0056b3;
            }
            
            .info-panel {
                background: #e9ecef;
                border-radius: 5px;
                padding: 15px;
                margin: 20px 0;
            }
        </style>
    </head>
    <body>
        <h1>ðŸŒ³ Interactive Phylogenetic Tree Analysis</h1>
        
        <div class="info-panel">
            <h3>Query Species: Varanus komodoensis</h3>
            <p><strong>Method:</strong> UPGMA_hierarchical_clustering</p>
            <p><strong>Total Species:</strong> 39</p>
            <p><strong>Analysis Date:</strong> 2025-06-09 17:43:57</p>
        </div>
        
        <div class="controls">
            <button class="btn" onclick="expandAll()">Expand All</button>
            <button class="btn" onclick="collapseAll()">Collapse All</button>
            <button class="btn" onclick="resetZoom()">Reset Zoom</button>
            <button class="btn" onclick="downloadSVG()">Download SVG</button>
        </div>
        
        <div class="legend">
            <h4>ðŸŽ¨ IUCN Conservation Status Legend:</h4>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #FF0000"></span>
                <span>CR - Critically Endangered</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #FF8C00"></span>
                <span>EN - Endangered</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #FFD700"></span>
                <span>VU - Vulnerable</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #9ACD32"></span>
                <span>NT - Near Threatened</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #32CD32"></span>
                <span>LC - Least Concern</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #808080"></span>
                <span>DD - Data Deficient</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #0000FF"></span>
                <span>Query Species</span>
            </div>
        </div>
        
        <div class="tree-container">
            <div id="tree"></div>
        </div>
        
        <div class="tooltip"></div>
        
        <script>
            // Tree data
            const treeData = {
  "id": "uzx3urbc",
  "name": "Inner38",
  "branch_length": 0.0,
  "parent": null,
  "is_leaf": true,
  "children": [
    {
      "id": "vvmidfcz",
      "name": "Varanus storri ",
      "branch_length": 0.4980668722734153,
      "parent": "uzx3urbc",
      "conservation_status": "LC",
      "conservation_source": "IUCN Red List",
      "iucn_year_published": "2018",
      "possibly_extinct": false,
      "is_leaf": true
    },
    {
      "id": "zzi3mt6s",
      "name": "Inner37",
      "branch_length": 0.48917184596048124,
      "parent": "uzx3urbc",
      "is_leaf": true,
      "children": [
        {
          "id": "xqxv8t0t",
          "name": "Inner33",
          "branch_length": 0.002751863919771634,
          "parent": "zzi3mt6s",
          "is_leaf": true,
          "children": [
            {
              "id": "dmxy4spq",
              "name": "Inner27",
              "branch_length": 0.002759971509971506,
              "parent": "xqxv8t0t",
              "is_leaf": true,
              "children": [
                {
                  "id": "zuir9bj4",
                  "name": "Varanus gilleni",
                  "branch_length": 0.0033831908831908897,
                  "parent": "dmxy4spq",
                  "conservation_status": "LC",
                  "conservation_source": "IUCN Red List",
                  "iucn_year_published": "2018",
                  "possibly_extinct": false,
                  "is_leaf": true
                },
                {
                  "id": "x5d2597e",
                  "name": "Varanus timoren",
                  "branch_length": 0.0033831908831908897,
                  "parent": "dmxy4spq",
                  "conservation_status": "LC",
                  "conservation_source": "IUCN Red List (search match)",
                  "iucn_year_published": "2021",
                  "is_leaf": true
                }
              ],
              "is_internal": true
            },
            {
              "id": "h348px4u",
              "name": "Inner26",
              "branch_length": 0.002938034188034188,
              "parent": "xqxv8t0t",
              "is_leaf": true,
              "children": [
                {
                  "id": "7g8832h1",
                  "name": "Varanus marmora",
                  "branch_length": 0.0032051282051282076,
                  "parent": "h348px4u",
                  "conservation_status": "LC",
                  "conservation_source": "IUCN Red List (search match)",
                  "iucn_year_published": "2022",
                  "is_leaf": true
                },
                {
                  "id": "mwxkjxps",
                  "name": "Inner14",
                  "branch_length": 0.0012464387464387466,
                  "parent": "h348px4u",
                  "is_leaf": true,
                  "children": [
                    {
                      "id": "ekmhd07r",
                      "name": "Varanus rosenbe",
                      "branch_length": 0.001958689458689461,
                      "parent": "mwxkjxps",
                      "conservation_status": "LC",
                      "conservation_source": "IUCN Red List (search match)",
                      "iucn_year_published": "2018",
                      "is_leaf": true
                    },
                    {
                      "id": "rs0k7282",
                      "name": "Inner2",
                      "branch_length": 0.0012464387464387328,
                      "parent": "mwxkjxps",
                      "is_leaf": true,
                      "children": [
                        {
                          "id": "d8gmovyc",
                          "name": "Varanus pilbare",
                          "branch_length": 0.0007122507122507282,
                          "parent": "rs0k7282",
                          "conservation_status": "LC",
                          "conservation_source": "IUCN Red List (search match)",
                          "iucn_year_published": "2018",
                          "is_leaf": true
                        },
                        {
                          "id": "2v06r3un",
                          "name": "Inner1",
                          "branch_length": 0.0007122507122507282,
                          "parent": "rs0k7282",
                          "is_leaf": true,
                          "children": [
                            {
                              "id": "4awzxper",
                              "name": "Varanus kingoru",
                              "branch_length": 0.0,
                              "parent": "2v06r3un",
                              "conservation_status": "LC",
                              "conservation_source": "IUCN Red List (search match)",
                              "iucn_year_published": "2018",
                              "is_leaf": true
                            },
                            {
                              "id": "a71whsp3",
                              "name": "Varanus caudoli",
                              "branch_length": 0.0,
                              "parent": "2v06r3un",
                              "conservation_status": "LC",
                              "conservation_source": "IUCN Red List (search match)",
                              "iucn_year_published": "2018",
                              "is_leaf": true
                            }
                          ],
                          "is_internal": true
                        }
                      ],
                      "is_internal": true
                    }
                  ],
                  "is_internal": true
                }
              ],
              "is_internal": true
            }
          ],
          "is_internal": true
        },
        {
          "id": "yds7utbf",
          "name": "Inner36",
          "branch_length": 0.001132954219807242,
          "parent": "zzi3mt6s",
          "is_leaf": true,
          "children": [
            {
              "id": "rioyxkju",
              "name": "Varanus dumeril",
              "branch_length": 0.007762072093126788,
              "parent": "yds7utbf",
              "conservation_status": "DD",
              "conservation_source": "IUCN Red List (search match)",
              "iucn_year_published": "2021",
              "is_leaf": true
            },
            {
              "id": "uij74wom",
              "name": "Inner35",
              "branch_length": 0.0008848358762909691,
              "parent": "yds7utbf",
              "is_leaf": true,
              "children": [
                {
                  "id": "7voiykzr",
                  "name": "Inner34",
                  "branch_length": 0.00046697980657940327,
                  "parent": "uij74wom",
                  "is_leaf": true,
                  "children": [
                    {
                      "id": "77ei2qta",
                      "name": "Inner32",
                      "branch_length": 0.0007122507122507005,
                      "parent": "7voiykzr",
                      "is_leaf": true,
                      "children": [
                        {
                          "id": "rhzxue8d",
                          "name": "Varanus mitchel",
                          "branch_length": 0.005698005698005715,
                          "parent": "77ei2qta",
                          "conservation_status": "CR",
                          "conservation_source": "IUCN Red List (search match)",
                          "iucn_year_published": "2018",
                          "is_leaf": true
                        },
                        {
                          "id": "vav2vr78",
                          "name": "Varanus salvato",
                          "branch_length": 0.005698005698005715,
                          "parent": "77ei2qta",
                          "conservation_status": "LC",
                          "conservation_source": "IUCN Red List (search match)",
                          "iucn_year_published": "2021",
                          "is_leaf": true
                        }
                      ],
                      "is_internal": true
                    },
                    {
                      "id": "f3k50wc3",
                      "name": "Varanus yuwonoi",
                      "branch_length": 0.006410256410256415,
                      "parent": "7voiykzr",
                      "conservation_status": "VU",
                      "conservation_source": "IUCN Red List",
                      "iucn_year_published": "2021",
                      "possibly_extinct": false,
                      "is_leaf": true
                    }
                  ],
                  "is_internal": true
                },
                {
                  "id": "b4e1ci8l",
                  "name": "Inner31",
                  "branch_length": 0.002420104806579399,
                  "parent": "uij74wom",
                  "is_leaf": true,
                  "children": [
                    {
                      "id": "gutrt7kn",
                      "name": "Varanus panopte",
                      "branch_length": 0.00445713141025642,
                      "parent": "b4e1ci8l",
                      "conservation_status": "LC",
                      "conservation_source": "IUCN Red List (search match)",
                      "iucn_year_published": "2018",
                      "is_leaf": true
                    },
                    {
                      "id": "110c0ygg",
                      "name": "Inner30",
                      "branch_length": 0.00021562277421652547,
                      "parent": "b4e1ci8l",
                      "is_leaf": true,
                      "children": [
                        {
                          "id": "42262htc",
                          "name": "Varanus nebulos",
                          "branch_length": 0.004241508636039894,
                          "parent": "110c0ygg",
                          "conservation_status": "DD",
                          "conservation_source": "IUCN (not found)",
                          "is_leaf": true
                        },
                        {
                          "id": "sy9hlmf5",
                          "name": "Inner29",
                          "branch_length": 0.0005179293814547765,
                          "parent": "110c0ygg",
                          "is_leaf": true,
                          "children": [
                            {
                              "id": "fh7eqood",
                              "name": "Inner23",
                              "branch_length": 0.000885705322961203,
                              "parent": "sy9hlmf5",
                              "is_leaf": true,
                              "children": [
                                {
                                  "id": "wf6bu8u9",
                                  "name": "Varanus spencer",
                                  "branch_length": 0.0028378739316239146,
                                  "parent": "fh7eqood",
                                  "conservation_status": "LC",
                                  "conservation_source": "IUCN Red List (search match)",
                                  "iucn_year_published": "2018",
                                  "is_leaf": true
                                },
                                {
                                  "id": "7k410bhu",
                                  "name": "Inner19",
                                  "branch_length": 0.0004006410256410225,
                                  "parent": "fh7eqood",
                                  "is_leaf": true,
                                  "children": [
                                    {
                                      "id": "lw805i9o",
                                      "name": "Inner12",
                                      "branch_length": 0.0004785434472934589,
                                      "parent": "7k410bhu",
                                      "is_leaf": true,
                                      "children": [
                                        {
                                          "id": "wztk3tzg",
                                          "name": "Varanus glauert",
                                          "branch_length": 0.0019586894586894332,
                                          "parent": "lw805i9o",
                                          "conservation_status": "LC",
                                          "conservation_source": "IUCN Red List (search match)",
                                          "iucn_year_published": "2018",
                                          "is_leaf": true
                                        },
                                        {
                                          "id": "mnzttpij",
                                          "name": "Varanus glebopa",
                                          "branch_length": 0.0019586894586894332,
                                          "parent": "lw805i9o",
                                          "conservation_status": "LC",
                                          "conservation_source": "IUCN Red List (search match)",
                                          "iucn_year_published": "2018",
                                          "is_leaf": true
                                        }
                                      ],
                                      "is_internal": true
                                    },
                                    {
                                      "id": "qkq3gf9z",
                                      "name": "Inner16",
                                      "branch_length": 0.0003227386039886069,
                                      "parent": "7k410bhu",
                                      "is_leaf": true,
                                      "children": [
                                        {
                                          "id": "wy6bxmux",
                                          "name": "Inner7",
                                          "branch_length": 0.0009570868945868866,
                                          "parent": "qkq3gf9z",
                                          "is_leaf": true,
                                          "children": [
                                            {
                                              "id": "5zn2u2zy",
                                              "name": "Inner6",
                                              "branch_length": 0.00026709401709400227,
                                              "parent": "wy6bxmux",
                                              "is_leaf": true,
                                              "children": [
                                                {
                                                  "id": "lzizk26m",
                                                  "name": "Varanus jobiens",
                                                  "branch_length": 0.0008903133903133964,
                                                  "parent": "5zn2u2zy",
                                                  "conservation_status": "LC",
                                                  "conservation_source": "IUCN Red List (search match)",
                                                  "iucn_year_published": "2016",
                                                  "is_leaf": true
                                                },
                                                {
                                                  "id": "1hvydb38",
                                                  "name": "Inner3",
                                                  "branch_length": 0.00017806267806266818,
                                                  "parent": "5zn2u2zy",
                                                  "is_leaf": true,
                                                  "children": [
                                                    {
                                                      "id": "usr51t33",
                                                      "name": "Varanus olivace",
                                                      "branch_length": 0.0007122507122507282,
                                                      "parent": "1hvydb38",
                                                      "conservation_status": "VU",
                                                      "conservation_source": "IUCN Red List (search match)",
                                                      "iucn_year_published": "2022",
                                                      "is_leaf": true
                                                    },
                                                    {
                                                      "id": "3c67phd6",
                                                      "name": "Varanus melinus",
                                                      "branch_length": 0.0007122507122507282,
                                                      "parent": "1hvydb38",
                                                      "conservation_status": "EN",
                                                      "conservation_source": "IUCN Red List",
                                                      "iucn_year_published": "2021",
                                                      "possibly_extinct": false,
                                                      "is_leaf": true
                                                    }
                                                  ],
                                                  "is_internal": true
                                                }
                                              ],
                                              "is_internal": true
                                            },
                                            {
                                              "id": "4ae7xye9",
                                              "name": "Varanus indicus",
                                              "branch_length": 0.0011574074074073987,
                                              "parent": "wy6bxmux",
                                              "conservation_status": "LC",
                                              "conservation_source": "IUCN Red List",
                                              "iucn_year_published": "2021",
                                              "possibly_extinct": false,
                                              "is_leaf": true
                                            }
                                          ],
                                          "is_internal": true
                                        },
                                        {
                                          "id": "u2hbwjx3",
                                          "name": "Varanus mertens",
                                          "branch_length": 0.0021144943019942852,
                                          "parent": "qkq3gf9z",
                                          "conservation_status": "EN",
                                          "conservation_source": "IUCN Red List (search match)",
                                          "iucn_year_published": "2018",
                                          "is_leaf": true
                                        }
                                      ],
                                      "is_internal": true
                                    }
                                  ],
                                  "is_internal": true
                                }
                              ],
                              "is_internal": true
                            },
                            {
                              "id": "yyl055hm",
                              "name": "Inner28",
                              "branch_length": 0.0003292594540153103,
                              "parent": "sy9hlmf5",
                              "is_leaf": true,
                              "children": [
                                {
                                  "id": "hm4iiwf0",
                                  "name": "Inner24",
                                  "branch_length": 0.00047854344729346323,
                                  "parent": "yyl055hm",
                                  "is_leaf": true,
                                  "children": [
                                    {
                                      "id": "b0uqzw6e",
                                      "name": "Varanus griseus",
                                      "branch_length": 0.002915776353276344,
                                      "parent": "hm4iiwf0",
                                      "conservation_status": "LC",
                                      "conservation_source": "IUCN Red List",
                                      "iucn_year_published": "2021",
                                      "possibly_extinct": false,
                                      "is_leaf": true
                                    },
                                    {
                                      "id": "7986ut6g",
                                      "name": "Inner21",
                                      "branch_length": 0.0003449964387464352,
                                      "parent": "hm4iiwf0",
                                      "is_leaf": true,
                                      "children": [
                                        {
                                          "id": "29gci9qu",
                                          "name": "Inner13",
                                          "branch_length": 0.0006120904558404618,
                                          "parent": "7986ut6g",
                                          "is_leaf": true,
                                          "children": [
                                            {
                                              "id": "43wkx5kr",
                                              "name": "Inner10",
                                              "branch_length": 0.0005341880341880462,
                                              "parent": "29gci9qu",
                                              "is_leaf": true,
                                              "children": [
                                                {
                                                  "id": "1vc10rrx",
                                                  "name": "Inner8",
                                                  "branch_length": 0.00017806267806264042,
                                                  "parent": "43wkx5kr",
                                                  "is_leaf": true,
                                                  "children": [
                                                    {
                                                      "id": "nf8x25fc",
                                                      "name": "Varanus beccari",
                                                      "branch_length": 0.0012464387464387605,
                                                      "parent": "1vc10rrx",
                                                      "conservation_status": "DD",
                                                      "conservation_source": "IUCN Red List (search match)",
                                                      "iucn_year_published": "2016",
                                                      "is_leaf": true
                                                    },
                                                    {
                                                      "id": "0alg9334",
                                                      "name": "Varanus doreanu",
                                                      "branch_length": 0.0012464387464387605,
                                                      "parent": "1vc10rrx",
                                                      "conservation_status": "LC",
                                                      "conservation_source": "IUCN Red List (search match)",
                                                      "iucn_year_published": "2018",
                                                      "is_leaf": true
                                                    }
                                                  ],
                                                  "is_internal": true
                                                },
                                                {
                                                  "id": "501u0xbb",
                                                  "name": "Varanus cumingi",
                                                  "branch_length": 0.001424501424501401,
                                                  "parent": "43wkx5kr",
                                                  "conservation_status": "LC",
                                                  "conservation_source": "IUCN Red List",
                                                  "iucn_year_published": "2022",
                                                  "possibly_extinct": false,
                                                  "is_leaf": true
                                                }
                                              ],
                                              "is_internal": true
                                            },
                                            {
                                              "id": "ucis1ay0",
                                              "name": "Varanus togianu",
                                              "branch_length": 0.001958689458689447,
                                              "parent": "29gci9qu",
                                              "conservation_status": "LC",
                                              "conservation_source": "IUCN Red List (search match)",
                                              "iucn_year_published": "2021",
                                              "is_leaf": true
                                            }
                                          ],
                                          "is_internal": true
                                        },
                                        {
                                          "id": "jbktzdfh",
                                          "name": "Inner17",
                                          "branch_length": 0.0003449964387464595,
                                          "parent": "7986ut6g",
                                          "is_leaf": true,
                                          "children": [
                                            {
                                              "id": "cj9m31ph",
                                              "name": "Varanus acanthu",
                                              "branch_length": 0.0022257834757834494,
                                              "parent": "jbktzdfh",
                                              "conservation_status": "LC",
                                              "conservation_source": "IUCN Red List (search match)",
                                              "iucn_year_published": "2018",
                                              "is_leaf": true
                                            },
                                            {
                                              "id": "silehred",
                                              "name": "Inner4",
                                              "branch_length": 0.0015135327635327211,
                                              "parent": "jbktzdfh",
                                              "is_leaf": true,
                                              "children": [
                                                {
                                                  "id": "hczruiqe",
                                                  "name": "Varanus eremius",
                                                  "branch_length": 0.0007122507122507282,
                                                  "parent": "silehred",
                                                  "conservation_status": "LC",
                                                  "conservation_source": "IUCN Red List",
                                                  "iucn_year_published": "2018",
                                                  "possibly_extinct": false,
                                                  "is_leaf": true
                                                },
                                                {
                                                  "id": "xqiys2hm",
                                                  "name": "Varanus brevica",
                                                  "branch_length": 0.0007122507122507282,
                                                  "parent": "silehred",
                                                  "conservation_status": "LC",
                                                  "conservation_source": "IUCN Red List (search match)",
                                                  "iucn_year_published": "2018",
                                                  "is_leaf": true
                                                }
                                              ],
                                              "is_internal": true
                                            }
                                          ],
                                          "is_internal": true
                                        }
                                      ],
                                      "is_internal": true
                                    }
                                  ],
                                  "is_internal": true
                                },
                                {
                                  "id": "bawafu4e",
                                  "name": "Inner25",
                                  "branch_length": 0.00036725427350426786,
                                  "parent": "yyl055hm",
                                  "is_leaf": true,
                                  "children": [
                                    {
                                      "id": "zmlisqv5",
                                      "name": "Varanus gigante",
                                      "branch_length": 0.0030270655270655394,
                                      "parent": "bawafu4e",
                                      "conservation_status": "LC",
                                      "conservation_source": "IUCN Red List (search match)",
                                      "iucn_year_published": "2018",
                                      "is_leaf": true
                                    },
                                    {
                                      "id": "b3s74ssc",
                                      "name": "Inner22",
                                      "branch_length": 0.0003616898148148216,
                                      "parent": "bawafu4e",
                                      "is_leaf": true,
                                      "children": [
                                        {
                                          "id": "sv642mxe",
                                          "name": "Inner20",
                                          "branch_length": 0.0001724982193732523,
                                          "parent": "b3s74ssc",
                                          "is_leaf": true,
                                          "children": [
                                            {
                                              "id": "wkqwxl8j",
                                              "name": "Inner18",
                                              "branch_length": 0.00017806267806264042,
                                              "parent": "sv642mxe",
                                              "is_leaf": true,
                                              "children": [
                                                {
                                                  "id": "zyznivl5",
                                                  "name": "Varanus semirem",
                                                  "branch_length": 0.002314814814814825,
                                                  "parent": "wkqwxl8j",
                                                  "conservation_status": "LC",
                                                  "conservation_source": "IUCN Red List (search match)",
                                                  "iucn_year_published": "2018",
                                                  "is_leaf": true
                                                },
                                                {
                                                  "id": "22jao15k",
                                                  "name": "Varanus scalari",
                                                  "branch_length": 0.002314814814814825,
                                                  "parent": "wkqwxl8j",
                                                  "conservation_status": "LC",
                                                  "conservation_source": "IUCN Red List (search match)",
                                                  "iucn_year_published": "2018",
                                                  "is_leaf": true
                                                }
                                              ],
                                              "is_internal": true
                                            },
                                            {
                                              "id": "2sdslikj",
                                              "name": "Varanus varius",
                                              "branch_length": 0.0024928774928774655,
                                              "parent": "sv642mxe",
                                              "conservation_status": "LC",
                                              "conservation_source": "IUCN Red List",
                                              "iucn_year_published": "2018",
                                              "possibly_extinct": false,
                                              "is_leaf": true
                                            }
                                          ],
                                          "is_internal": true
                                        },
                                        {
                                          "id": "zo003rdg",
                                          "name": "Inner15",
                                          "branch_length": 0.0007066862535612568,
                                          "parent": "b3s74ssc",
                                          "is_leaf": true,
                                          "children": [
                                            {
                                              "id": "bgzjqexv",
                                              "name": "Varanus gouldii",
                                              "branch_length": 0.001958689458689461,
                                              "parent": "zo003rdg",
                                              "conservation_status": "LC",
                                              "conservation_source": "IUCN Red List",
                                              "iucn_year_published": "2018",
                                              "possibly_extinct": false,
                                              "is_leaf": true
                                            },
                                            {
                                              "id": "ov0bgsrc",
                                              "name": "Inner11",
                                              "branch_length": 0.0004896723646723861,
                                              "parent": "zo003rdg",
                                              "is_leaf": true,
                                              "children": [
                                                {
                                                  "id": "0m6rumyz",
                                                  "name": "Inner9",
                                                  "branch_length": 0.0002225783475783144,
                                                  "parent": "ov0bgsrc",
                                                  "is_leaf": true,
                                                  "children": [
                                                    {
                                                      "id": "lpczknrg",
                                                      "name": "Varanus tristis",
                                                      "branch_length": 0.0012464387464387605,
                                                      "parent": "0m6rumyz",
                                                      "conservation_status": "LC",
                                                      "conservation_source": "IUCN Red List",
                                                      "iucn_year_published": "2018",
                                                      "possibly_extinct": false,
                                                      "is_leaf": true
                                                    },
                                                    {
                                                      "id": "7wth1cuq",
                                                      "name": "Varanus panopte 2",
                                                      "branch_length": 0.0012464387464387605,
                                                      "parent": "0m6rumyz",
                                                      "conservation_status": "LC",
                                                      "conservation_source": "IUCN Red List (search match)",
                                                      "iucn_year_published": "2018",
                                                      "is_leaf": true
                                                    }
                                                  ],
                                                  "is_internal": true
                                                },
                                                {
                                                  "id": "ahnzmlfe",
                                                  "name": "Inner5",
                                                  "branch_length": 0.0005787037037037063,
                                                  "parent": "ov0bgsrc",
                                                  "is_leaf": true,
                                                  "children": [
                                                    {
                                                      "id": "99wmosf1",
                                                      "name": "Varanus salvado",
                                                      "branch_length": 0.0008903133903133686,
                                                      "parent": "ahnzmlfe",
                                                      "conservation_status": "LC",
                                                      "conservation_source": "IUCN Red List (search match)",
                                                      "iucn_year_published": "2016",
                                                      "is_leaf": true
                                                    },
                                                    {
                                                      "id": "ggtnqmay",
                                                      "name": "Varanus komodoe",
                                                      "branch_length": 0.0008903133903133686,
                                                      "parent": "ahnzmlfe",
                                                      "conservation_status": "R",
                                                      "conservation_source": "IUCN Red List (search match)",
                                                      "iucn_year_published": "1988",
                                                      "is_leaf": true
                                                    }
                                                  ],
                                                  "is_internal": true
                                                }
                                              ],
                                              "is_internal": true
                                            }
                                          ],
                                          "is_internal": true
                                        }
                                      ],
                                      "is_internal": true
                                    }
                                  ],
                                  "is_internal": true
                                }
                              ],
                              "is_internal": true
                            }
                          ],
                          "is_internal": true
                        }
                      ],
                      "is_internal": true
                    }
                  ],
                  "is_internal": true
                }
              ],
              "is_internal": true
            }
          ],
          "is_internal": true
        }
      ],
      "is_internal": true
    }
  ],
  "is_internal": true
};
            
            // Status colors
            const statusColors = {"EX": "#000000", "EW": "#8B008B", "CR": "#FF0000", "EN": "#FF8C00", "VU": "#FFD700", "NT": "#9ACD32", "LC": "#32CD32", "DD": "#808080", "NE": "#A9A9A9", "Query": "#0000FF"};
            
            // Set dimensions and margins
            const margin = {top: 20, right: 120, bottom: 20, left: 120};
            const width = 1200 - margin.left - margin.right;
            const height = 800 - margin.bottom - margin.top;
            
            // Create SVG
            const svg = d3.select("#tree")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom);
                
            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Create tree layout
            const tree = d3.tree().size([height, width]);
            
            // Create hierarchy
            const root = d3.hierarchy(treeData);
            
            // Generate tree
            tree(root);
            
            // Add zoom behavior
            const zoom = d3.zoom()
                .scaleExtent([0.1, 3])
                .on("zoom", (event) => {
                    g.attr("transform", event.transform);
                });
            
            svg.call(zoom);
            
            // Create tooltip
            const tooltip = d3.select(".tooltip");
            
            // Add links
            const link = g.selectAll(".link")
                .data(root.descendants().slice(1))
                .enter().append("path")
                .attr("class", "link")
                .attr("d", d => {
                    if (!d.parent) return "";
                    return `M${d.y},${d.x} C${(d.y + d.parent.y) / 2},${d.x} ${(d.y + d.parent.y) / 2},${d.parent.x} ${d.parent.y},${d.parent.x}`;
                })
                .style("stroke-width", d => Math.max(1, 3 - d.depth));
            
            // Add nodes
            const node = g.selectAll(".node")
                .data(root.descendants())
                .enter().append("g")
                .attr("class", d => {
                    let classes = "node";
                    if (d.data.is_query) classes += " query";
                    return classes;
                })
                .attr("transform", d => `translate(${d.y},${d.x})`);
            
            // Add circles for nodes
            node.append("circle")
                .attr("r", d => d.data.is_query ? 8 : 5)
                .style("fill", d => {
                    const status = d.data.conservation_status || "DD";
                    return statusColors[status] || statusColors["DD"];
                })
                .style("opacity", 0.8)
                .on("mouseover", function(event, d) {
                    // Highlight node
                    d3.select(this).style("opacity", 1).attr("r", d.data.is_query ? 10 : 7);
                    
                    // Show tooltip
                    const status = d.data.conservation_status || "DD";
                    const similarity = d.data.similarity ? `${(d.data.similarity * 100).toFixed(1)}%` : "N/A";
                    
                    let tooltipContent = `
                        <strong>${d.data.name || "Internal Node"}</strong><br/>
                        <strong>Conservation Status:</strong> ${status}<br/>
                    `;
                    
                    if (d.data.similarity) {
                        tooltipContent += `<strong>Similarity:</strong> ${similarity}<br/>`;
                    }
                    
                    if (d.data.branch_length) {
                        tooltipContent += `<strong>Branch Length:</strong> ${d.data.branch_length.toFixed(4)}<br/>`;
                    }
                    
                    if (d.data.iucn_year_published) {
                        tooltipContent += `<strong>IUCN Year:</strong> ${d.data.iucn_year_published}<br/>`;
                    }
                    
                    if (d.data.conservation_source) {
                        tooltipContent += `<strong>Source:</strong> ${d.data.conservation_source}<br/>`;
                    }
                    
                    tooltip.transition().duration(200).style("opacity", .9);
                    tooltip.html(tooltipContent)
                        .style("left", (event.pageX + 10) + "px")
                        .style("top", (event.pageY - 28) + "px");
                })
                .on("mouseout", function(event, d) {
                    // Reset node
                    d3.select(this).style("opacity", 0.8).attr("r", d.data.is_query ? 8 : 5);
                    
                    // Hide tooltip
                    tooltip.transition().duration(500).style("opacity", 0);
                });
            
            // Add labels
            node.append("text")
                .attr("dy", ".35em")
                .attr("x", d => d.children || d._children ? -13 : 13)
                .style("text-anchor", d => d.children || d._children ? "end" : "start")
                .style("font-size", d => d.data.is_query ? "14px" : "12px")
                .style("font-weight", d => d.data.is_query ? "bold" : "normal")
                .style("fill", d => {
                    const status = d.data.conservation_status || "DD";
                    return statusColors[status] || statusColors["DD"];
                })
                .text(d => {
                    if (!d.data.name) return "";
                    let name = d.data.name.replace(/_/g, " ");
                    if (d.data.is_query) name = "ðŸŽ¯ " + name + " (QUERY)";
                    return name;
                });
            
            // Control functions
            window.expandAll = function() {
                node.each(function(d) {
                    if (d._children) {
                        d.children = d._children;
                        d._children = null;
                    }
                });
                update();
            };
            
            window.collapseAll = function() {
                node.each(function(d) {
                    if (d.children) {
                        d._children = d.children;
                        d.children = null;
                    }
                });
                update();
            };
            
            window.resetZoom = function() {
                svg.transition().duration(750).call(
                    zoom.transform,
                    d3.zoomIdentity
                );
            };
            
            window.downloadSVG = function() {
                const svgData = new XMLSerializer().serializeToString(svg.node());
                const svgBlob = new Blob([svgData], {type: "image/svg+xml;charset=utf-8"});
                const svgUrl = URL.createObjectURL(svgBlob);
                const downloadLink = document.createElement("a");
                downloadLink.href = svgUrl;
                downloadLink.download = "phylogenetic_tree_Varanus_komodoensis.svg";
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            };
            
            function update() {
                // Re-render tree (simplified for this example)
                location.reload();
            }
            
            // Add branch length scale
            const scale = g.append("g")
                .attr("class", "scale")
                .attr("transform", `translate(50, ${height - 50})`);
            
            scale.append("line")
                .attr("x1", 0)
                .attr("x2", 100)
                .attr("y1", 0)
                .attr("y2", 0)
                .style("stroke", "#333")
                .style("stroke-width", 2);
            
            scale.append("text")
                .attr("x", 50)
                .attr("y", -10)
                .style("text-anchor", "middle")
                .style("font-size", "12px")
                .text("0.1 substitutions/site");
        </script>
    </body>
    </html>
    